<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>매치포인트 게임판</title>
  <link rel="stylesheet" href="./styles/style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
</head>
<body>
  <header class="topbar">
    <div class="brand" aria-label="우리 모임 로고">
      <img src="./assets/image/match_point_logo2.png" alt="우리 모임 로고" class="brand-logo" />
    </div>
  </header>

  <main class="container">
    <div class="board-layout">
      <section class="board-area" aria-label="게임판 영역">
        <div class="board-header">
          <div>
            <h2>배드민턴 코트</h2>
            <p>코트를 추가하고 참가자를 드래그해서 원하는 위치에 배치하세요.</p>
          </div>
        <div class="board-actions">
          <button id="addCourtBtn" class="btn secondary" type="button">코트 추가</button>
          <button id="resetBoardBtn" class="btn" type="button">배치 초기화</button>
        </div>
      </div>
      <div class="game-board" id="gameBoard" aria-label="게임판"></div>
      <div class="waitlist-area" aria-label="배드민턴 코트 대기자 목록">
        <div class="waitlist-header">
          <div>
            <h3>대기순서</h3>
            <p>회원 목록의 카드를 끌어 놓아 4명씩 대기라인을 채우고 필요할 때 라인을 추가하거나 제거하세요.</p>
          </div>
          <div class="waitlist-actions">
            <button id="addWaitlistRowBtn" class="btn secondary" type="button">대기 라인 추가</button>
          </div>
        </div>
        <div id="waitlistRows" class="waitlist-rows" aria-live="polite"></div>
      </div>
      <p class="board-hint">추가한 코트 위 아무 곳이나 카드를 내려놓으면 배치됩니다.</p>
      </section>

      <section class="participants-section" aria-label="멤버 목록">
        <div class="participants-header">
          <div class="participants-heading-group">
            <h2>회원 목록</h2>
            <div class="participant-sort-bar">
              <label class="participant-sort-label" for="participantSortSelect">정렬 기준</label>
              <select id="participantSortSelect" class="participant-sort-select">
                <option value="gamesAsc">게임 적게 친 순</option>
                <option value="arrival">도착 순</option>
                <option value="name">이름 순</option>
                <!-- <option value="created">추가 순</option> -->
              </select>
            </div>
          </div>
        </div>

        <!-- <p class="section-description">필요한 위치에 끌어 놓고, 다시 목록으로 가져오고 싶다면 이 영역에 드롭하세요.</p> -->

        <div class="participant-controls">
          <div class="field-group">
            <label for="participantNameInput">이름</label>
            <input id="participantNameInput" type="text" placeholder="참가자 이름을 입력하세요" autocomplete="off" />
          </div>

          <div class="field-group color-picker">
            <span class="field-label">멤버 구분</span>
            <div class="color-options" role="radiogroup" aria-label="카드 색상 선택">
              <label class="color-chip blue">
                <input type="radio" name="participantColor" value="blue" checked />
                <span class="chip-visual">남 자</span>
              </label>
              <label class="color-chip pink">
                <input type="radio" name="participantColor" value="pink" />
                <span class="chip-visual">여 자</span>
              </label>
              <label class="color-chip orange">
                <input type="radio" name="participantColor" value="orange" />
                <span class="chip-visual">게스트</span>
              </label>
            </div>
          </div>

          <div class="field-group">
            <label for="participantGradeSelect">급수</label>
            <select id="participantGradeSelect" class="participant-grade-select">
              <option value="F" selected>F조</option>
              <option value="E">E조</option>
              <option value="D">D조</option>
              <option value="C">C조</option>
              <option value="B">B조</option>
              <option value="A">A조</option>
            </select>
          </div>
        </div>

        <div class="participant-cta">
          <button id="addParticipantBtn" class="btn" type="button">참가자 추가</button>
        </div>

        <div id="participantsList" class="participants-list" aria-live="polite"></div>

        <div class="history-download-cta">
          <button id="downloadHistoryBtn" class="btn ghost" type="button">오늘 히스토리 저장</button>
        </div>

        <div class="hard-reset-cta">
          <button id="hardResetBtn" class="btn danger" type="button">전체 초기화</button>
        </div>
      </section>
    </div>
  </main>

  <div id="participantDetailModal" class="participant-modal" aria-hidden="true">
    <div class="participant-modal-backdrop" data-modal-action="close"></div>
    <div class="participant-modal-panel" role="dialog" aria-modal="true" aria-labelledby="participantDetailName">
      <header class="participant-modal-header">
        <div>
          <p class="participant-modal-label">회원 정보</p>
          <h3 id="participantDetailName" class="participant-modal-title"></h3>
        </div>
        <button type="button" class="participant-modal-close" id="participantDetailCloseBtn" aria-label="닫기">&times;</button>
      </header>
      <div class="participant-modal-body">
        <dl class="participant-modal-stats">
          <div class="participant-modal-stat">
            <dt>오늘 도착</dt>
            <dd id="participantDetailArrival">기록 없음</dd>
          </div>
          <div class="participant-modal-stat">
            <dt>오늘 게임 횟수</dt>
            <dd>
              <div class="participant-detail-count-editor">
                <button type="button" class="count-editor-btn" id="participantDetailCountDecrease" aria-label="오늘 게임 횟수 1 감소">-</button>
                <input type="number" id="participantDetailCountInput" min="0" inputmode="numeric" aria-label="오늘 게임 횟수 입력" readonly />
                <button type="button" class="count-editor-btn" id="participantDetailCountIncrease" aria-label="오늘 게임 횟수 1 증가">+</button>
              </div>
            </dd>
          </div>
        </dl>
        <div class="participant-modal-field">
          <span class="field-label">오늘의 경기 기록</span>
          <div class="participant-match-history">
            <p class="match-history-empty" id="participantMatchHistoryEmpty">기록 없음</p>
            <ul class="match-history-list" id="participantMatchHistoryList" hidden></ul>
          </div>
        </div>
        <div class="participant-modal-field color-picker">
          <span class="field-label">멤버 구분</span>
          <div class="color-options participant-detail-colors" role="radiogroup" aria-label="멤버 구분 선택">
            <label class="color-chip blue">
              <input type="radio" name="participantDetailColor" value="blue" />
              <span class="chip-visual">블루</span>
            </label>
            <label class="color-chip pink">
              <input type="radio" name="participantDetailColor" value="pink" />
              <span class="chip-visual">핑크</span>
            </label>
            <label class="color-chip orange">
              <input type="radio" name="participantDetailColor" value="orange" />
              <span class="chip-visual">오렌지</span>
            </label>
          </div>
        </div>

        <div class="participant-modal-field">
          <label class="field-label" for="participantDetailGradeSelect">급수</label>
          <select id="participantDetailGradeSelect" class="participant-grade-select">
            <option value="F">F조</option>
            <option value="E">E조</option>
            <option value="D">D조</option>
            <option value="C">C조</option>
            <option value="B">B조</option>
            <option value="A">A조</option>
          </select>
        </div>
      </div>
      <footer class="participant-modal-footer">
        <button type="button" class="btn" id="participantDetailSaveBtn">저장</button>
      </footer>
    </div>
  </div>

  <div id="slotParticipantPicker" class="slot-picker" aria-hidden="true">
    <div class="slot-picker-backdrop" data-slot-picker-action="close"></div>
    <div class="slot-picker-panel" role="dialog" aria-modal="true" aria-labelledby="slotPickerTitle">
      <header class="slot-picker-header">
        <h3 id="slotPickerTitle">오늘 참여자 목록</h3>
        <button type="button" class="slot-picker-close" data-slot-picker-action="close" aria-label="닫기">&times;</button>
      </header>
      <div class="slot-picker-search">
        <input type="text" id="slotPickerSearchInput" placeholder="회원 이름 검색" autocomplete="off" />
      </div>
      <div class="slot-picker-list" id="slotPickerList" role="listbox"></div>
      <p class="slot-picker-empty" id="slotPickerEmptyMessage">검색 결과가 없습니다.</p>
    </div>
  </div>

  <script src="./scripts/app.js" defer></script>
</body>
</html>
